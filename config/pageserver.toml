# Neon Pageserver Configuration
# Reference copy — the canonical config is the ConfigMap in
# manifests/pageserver/statefulset.yaml.

listen_pg_addr = "0.0.0.0:6400"
listen_http_addr = "0.0.0.0:9898"

# Broker endpoint for safekeeper coordination
broker_endpoint = "http://storage-broker.neon.svc.cluster.local:50051"

# Page cache size in number of 8 KB blocks. Default is 8192 (64 MB).
# 32768 = 256 MB, 131072 = 1 GB.
page_cache_size = 32768

# Max file descriptors for layer files
max_file_descriptors = 500000

# Use std-fs instead of io_uring (avoids issues in containers)
virtual_file_io_engine = "std-fs"

# PostgreSQL distrib dir — contains v17/bin/initdb etc.
pg_distrib_dir = "/usr/local/pgsql"

# Storage controller (emergency mode skips re-attach when controller is absent)
control_plane_api = "http://storage-controller.neon.svc.cluster.local:1234"
control_plane_emergency_mode = false

# S3 remote storage — fields go directly under [remote_storage] (untagged enum)
[remote_storage]
bucket_name = "PLACEHOLDER_S3_BUCKET"
bucket_region = "us-west-2"
prefix_in_bucket = "pageserver/"
